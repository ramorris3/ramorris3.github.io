<!doctype html><html lang=en-us data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>Make-it Monday: Rogueslide Devlog #3 - Big Ideas for Little Games</title><meta name=description content="Game programming patterns for small, independent teams."><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script src=https://kit.fontawesome.com/acfeb685d1.js crossorigin=anonymous></script>
<link rel=stylesheet href=https://littlegames.dev/css/style.1d8233f454bf6bbf46abed7023dbbba557fc4af5f1e39de066ac496c94409622.css integrity="sha256-HYIz9FS/a79Gq+1wI9u7pVf8SvXx453gZqxJbJRAliI="><meta property="og:title" content="Make-it Monday: Rogueslide Devlog #3"><meta property="og:description" content="This week, I&rsquo;ll cover how I&rsquo;m creating enemy tiles with special abilities by talking about the spider enemy."><meta property="og:type" content="article"><meta property="og:url" content="https://littlegames.dev/posts/rs-devlog/3-spiders/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-05T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Make-it Monday: Rogueslide Devlog #3"><meta name=twitter:description content="This week, I&rsquo;ll cover how I&rsquo;m creating enemy tiles with special abilities by talking about the spider enemy."><link href=//cdn-images.mailchimp.com/embedcode/slim-10_7.css rel=stylesheet type=text/css><style type=text/css>#mc_embed_signup{background:#fff;clear:left;font:14px Helvetica,Arial,sans-serif}#mc_embed_signup form{padding-left:0}</style><link rel=stylesheet href=https://littlegames.dev/css/custom.css></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><h1 class=site-title><a href=/><i class="fas fa-gamepad"></i> Big Ideas for Little Games</a></h1><nav><a href=https://littlegames.dev/ title>Posts</a>
<a href=https://littlegames.dev/tags/ title>Tags</a>
<a href=https://littlegames.dev/archive/ title>Archive</a>
<a href=https://littlegames.dev/about/ title>About</a></nav></header><main id=main tabindex=-1><article class="post h-entry"><header class=post-header><h1 class="p-name post-title">Make-it Monday: Rogueslide Devlog #3</h1></header><div class="content e-content"><p>Rogueslide development went a little slower than usual this week. This is mostly due to the amount of effort and time I put into <a href=/posts/entity-component-systems/>my last post</a>, but also has to do with the holiday weekend, and some other family commitments that popped up.</p><p>That said, this will be a much shorter post than normal.</p><h2 id=this-week-in-rogueslide-spiders>This week in Rogueslide: Spiders!</h2><p>Introducing the latest addition to the forest area of Rogueslide: Spiders!</p><p><figure><img src=/rs-devlog/3-spiders/spider-tile.gif alt="Animated GIF of rogueslide gameplay with spider enemy"><figcaption>Spiders leave behind sticky webs for other tiles to get trapped in.</figcaption></figure></p><p>In Rogueslide, we aim to create interesting and unique enemies without making the gameplay overly-complex. We want spiders to feel like spiders, and dragons like dragons, but we don&rsquo;t want you to have to hurt your brain to really get what&rsquo;s going on each turn. The gameplay mechanics should feel deep enough to be engaging, but simple enough to be casual. It&rsquo;s a fine line to walk, and I&rsquo;ve found that games which walk that line well end up being very addicting.</p><p>With that in mind, there are a small handful of variables/stats that each tile has &ndash; hp, attack damage, mobility, etc. &ndash; that we can tweak. In addition, we can add unique and interesting behaviors, but only add them in predictable places each turn &ndash; pre-slide, post-slide, on death, etc. This way, the player is (hopefully) never overwhelmed by tons of nuanced interactions in the game, yet there&rsquo;s enough of that nuance to keep things fresh.</p><h2 id=hooking-in>Hooking In</h2><p><a href=/posts/rs-devlog/2-enemies/>In my devlog update from last week</a> I talked a little bit about tile &ldquo;hook&rdquo; methods. These are empty-bodied methods that every tile has, and they allow for me to easily add custom behavior to different tile types. The <code>onPostSlide</code> hook was put to good use when creating the spider.</p><p>The spider tile utilizes both stat tweaks <em>and</em> some special custom behavior to make it feel like a spider. Our primary goal with the spider was we wanted it to leave behind webs. So I overrode the <code>onPostSlide</code> hook to get it to leave behind a <code>WebTile</code> object whenever it moves (as long as the previous space is still open). Also, we playtested a little with having the spider slide all the way across the board, and leave a web on each tile it slid over, but that cluttered up the board way too quickly, so we changed its <code>baseMove</code> stat to 1.</p><p>In addition, we wanted the spider to be dangerous but lightweight. So the spider does 2 damage when it hits other tiles (as opposed to the goblin&rsquo;s 1 damage), but it only has 3 HP.</p><p><figure><img src=/rs-devlog/3-spiders/spider-attack.gif alt="Animated GIF of spider enemy leaving webs and attacking the player tile"><figcaption>Spiders don't have much HP, and they only slide one space per turn. But, they do 2 damange instead of 1. They also have a scratchy attack animation to differentiate their attacks visually.</figcaption></figure></p><h2 id=whos-in-charge-of-what>Who&rsquo;s In Charge of What?</h2><p>The last challenge in implementing the spider was figuring out how the webs should work.</p><p>We wanted webs to be different from stone tiles in that we didn&rsquo;t want to have other tiles attack them to clear them. Instead, a tile should slide <em>onto</em> a web space, and the web should disappear from underneath it. This hopefully gives the feel that the tiles are sliding <em>through</em> the webs and getting stuck, rather than attacking them like they would any other tile.</p><p>But the implementation for this behavior was a little tricky. Currently each turn goes like this:</p><ol><li>All tiles resolve their pre-slide logic.</li><li>All tiles slide until they can&rsquo;t slide no mo'.</li><li>All tiles resolve their <code>onCollide</code> logic with the tile in front of themselves as the collision target.</li><li>All tiles resolve their post-slide logic.</li></ol><p>Webs don&rsquo;t slide at all, so they will never resolve any <code>onCollide</code> logic because they&rsquo;re never bumping into anything. But other tiles bump into webs, and webs need to let those other tiles move into their space when that happens.</p><p>I figured it would be easier for a web tile to say &ldquo;Hey, you just hit me? Ok, I&rsquo;ll remove myself from the board and you can take my spot.&rdquo; As opposed to having everything else that could possibly hit a web tile say &ldquo;Oh, are you a web tile? Ok, let me remove you from the board and I&rsquo;ll move in to your spot.&rdquo;</p><p>In more formal terms, I don&rsquo;t want to couple the spiderweb&rsquo;s collision logic to every other tile&rsquo;s collide function. I want some of this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WebTile</span>(<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>onHit</span>(otherTile: BaseTile) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.removeFromGame()
</span></span><span style=display:flex><span>        otherTile.moveTo(<span style=color:#66d9ef>this</span>.x, <span style=color:#66d9ef>this</span>.y)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>and less of this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EnemyTile</span>(<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>onCollide</span>(other: BaseTile) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (other <span style=color:#66d9ef>is</span> WebTile) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.moveTo(other.x, other.y)
</span></span><span style=display:flex><span>            other.removeFromGame()
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerTile</span>(<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>onCollide</span>(other: BaseTile) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (other <span style=color:#66d9ef>is</span> WebTile) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.moveTo(other.x, other.y)
</span></span><span style=display:flex><span>            other.removeFromGame()
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ItemTile</span>(<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>onCollide</span>(other: BaseTile) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>..</span>.) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (other <span style=color:#66d9ef>is</span> WebTile) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.moveTo(other.x, other.y)
</span></span><span style=display:flex><span>            other.removeFromGame()
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If we forget about the web tile for a minute and try to generalize this, the fundamental problem becomes this: who should own the collision handler? The answer is it depends. Sometimes I want the sliding tile to handle it (like when attacking), other times I want the obstructing tile to handle it (like with the spiderweb).</p><p>My solution here was to split up collision handling into two separate functions in the <code>BaseTile</code> class: <code>onCollide(nextTile)</code> and <code>onSlideCheck(prevTile)</code>. I&rsquo;m not 100% sold on the naming, but the idea is that <code>onCollide</code> is called when I want the sliding (attacking) tile to handle the collision, and <code>onSlideCheck</code> is called when I want the obstructing tile to handle the collision.</p><p>An added bonus (esp. in the case of the spider web) is that I can call <code>onSlideCheck</code> while I&rsquo;m incrementally sliding a tile one space at a time. This makes the &ldquo;slide me over the top of the spiderweb and replace the spiderweb&rdquo; part of this problem easier.</p><p>If we zoom in on step 2 of each turn, it now looks like this:</p><ol><li>Pre-slide</li><li>Slide each tile as far as it will slide.<ul><li>For each tile, slide it one space at a time.</li><li>Each step, check if there is an obstructing tile.</li><li>If there is, check if anything special should happen here by doing <code>obstructingTile.onSlideCheck(slidingTile)</code></li></ul></li><li><code>onCollide</code> collision logic, after every tile has slid to its proper place.</li></ol><p>This logic and its implementation are subject to change, like everything else I write about Rogueslide here on the blog. But it seems like a good solution for now.</p><h2 id=see-you-next-week>See You Next Week</h2><p>Thanks so much for tuning in, and stay tuned for more updates! Until then, stay away from spiders.</p><p><figure><img src=/rs-devlog/3-spiders/spider-death.png alt="Image of game over screen with spider tile"><figcaption>Do spiders have names? In Rogueslide they do.</figcaption></figure></p></div><div class=post-info><div class="post-date dt-published">2021-04-05</div><a class="post-hidden-url u-url" href=https://littlegames.dev/posts/rs-devlog/3-spiders/>https://littlegames.dev/posts/rs-devlog/3-spiders/</a>
<a href=https://littlegames.dev class="p-name p-author post-hidden-author h-card" rel=me>Alex Morris</a><div class=post-taxonomies><ul class=post-tags><li><a href=https://littlegames.dev/tags/rogueslide>#rogueslide</a></li><li><a href=https://littlegames.dev/tags/devlog>#devlog</a></li><li><a href=https://littlegames.dev/tags/make-it-monday>#make it monday</a></li></ul></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/rs-devlog/4-dungeon/>Make-it Monday: Rogueslide Devlog #4</a></div><div class="right pagination-item"><a href=/posts/entity-component-systems/>Hybrid Entity Component Systems</a></div></div></main><footer class=common-footer><div class=common-footer-bottom><div class=copyright><p>Â© Alex Morris, 2022<br><a href=https://twitter.com/ramorris_3 target=_blank><i class="fab fa-twitter-square"></i> @ramorris_3</a><br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br></p></div></div><p class="h-card vcard"><a href=https://littlegames.dev class="p-name u-url url fn" rel=me>Alex Morris</a></p></footer></div></body></html>